#!/usr/bin/env python3
"""
Multi-turn Conversation Prompts with Few-shot Examples
Purpose: Provide sophisticated prompting strategies for LLM text detection
Each task uses system/user/assistant format with few-shot examples
"""

def create_few_shot_paraphrase_detection_messages(text):
    """Multi-turn format with few-shot examples for Task 1: Paraphrase Source Attribution"""
    
    messages = [
        {
            "role": "system",
            "content": """You are an expert text analyst specializing in paraphrase detection. Your task is to determine whether a paraphrased sentence was created by a human or by an AI/LLM system.

TASK CONTEXT: You are analyzing paraphrased versions of original text. Human paraphrases tend to be more natural, contextually aware, and show human linguistic intuition. LLM paraphrases often exhibit systematic patterns, over-formalization, or subtle unnaturalness.

CLASSIFICATION CRITERIA:
- Human paraphrase (0): Natural flow, contextual understanding, human-like word choices, appropriate informality/formality
- LLM paraphrase (1): Systematic rewording patterns, over-precision, unnatural phrasing, AI-like formalization

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Please analyze this paraphrased text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "The expeditious mahogany-colored vulpine creature propels itself in a vertical trajectory above the lethargic canine"

Classification:"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Please analyze this paraphrased text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "A quick brown fox jumps over a sleepy dog"

Classification:"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Please analyze this paraphrased text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "The research methodology employed in this investigation demonstrates a comprehensive approach to data collection and analysis"

Classification:"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Please analyze this paraphrased text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "{text}"

Classification:"""
        }
    ]
    
    return messages

def create_few_shot_authorship_detection_messages(text):
    """Multi-turn format with few-shot examples for Task 2: General Text Authorship Detection"""
    
    messages = [
        {
            "role": "system",
            "content": """You are an expert in AI-generated text detection. Your task is to determine whether a sentence was originally written by a human or generated by an AI/LLM system.

TASK CONTEXT: You are analyzing original text authorship. Human-written text shows natural creativity, personal voice, and authentic expression. LLM-generated text often exhibits training patterns, generic phrasing, or artificial coherence.

CLASSIFICATION CRITERIA:
- Human original (0): Authentic voice, natural imperfections, personal style, genuine creativity, contextual authenticity
- LLM generated (1): Training data patterns, generic expressions, artificial smoothness, systematic structure

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "In today's rapidly evolving digital landscape, organizations must leverage cutting-edge technologies to optimize their operational efficiency and drive sustainable growth."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Please analyze this text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "Ugh, my coffee maker broke again this morning. Third time this month! I swear these things are designed to fail right after the warranty expires."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "The implementation of artificial intelligence solutions presents numerous opportunities for enhancing productivity while simultaneously addressing potential challenges related to workforce adaptation."

Classification:"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Please analyze this text and classify it as either human-written (0) or AI/LLM-generated (1).

Text: "{text}"

Classification:"""
        }
    ]
    
    return messages

def create_few_shot_laundering_detection_messages(text):
    """Multi-turn format with few-shot examples for Task 3: AI Text Laundering Detection"""
    
    messages = [
        {
            "role": "system",
            "content": """You are a specialist in detecting AI text laundering techniques. Your task is to determine the level of AI processing in text - distinguishing between LLM-paraphrased original content versus LLM-paraphrased generated content.

TASK CONTEXT: You are comparing two types of AI-processed text: (1) LLM paraphrases of human original text, and (2) LLM paraphrases of AI-generated text. The second type represents deeper AI processing and "laundering" attempts.

CLASSIFICATION CRITERIA:
- LLM paraphrased original (0): AI paraphrase of human content - retains some human authenticity beneath AI processing
- LLM paraphrased generated (1): AI paraphrase of AI content - multiple layers of AI processing, more artificial patterns

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify the level of AI processing as either LLM-paraphrased original (0) or LLM-paraphrased generated (1).

Text: "The systematic implementation of advanced technological solutions facilitates the optimization of organizational processes and enhances operational effectiveness across multiple domains."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Please analyze this text and classify the level of AI processing as either LLM-paraphrased original (0) or LLM-paraphrased generated (1).

Text: "My neighbor's dog keeps barking at night, which makes it really difficult to get proper sleep before work the next day."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify the level of AI processing as either LLM-paraphrased original (0) or LLM-paraphrased generated (1).

Text: "The comprehensive utilization of innovative methodologies enables organizations to achieve enhanced performance metrics while simultaneously addressing complex operational challenges through strategic implementation."

Classification:"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Please analyze this text and classify the level of AI processing as either LLM-paraphrased original (0) or LLM-paraphrased generated (1).

Text: "{text}"

Classification:"""
        }
    ]
    
    return messages

def create_few_shot_iterative_depth_detection_messages(text):
    """Multi-turn format with few-shot examples for Task 4: Iterative Paraphrase Depth Detection"""
    
    messages = [
        {
            "role": "system",
            "content": """You are an expert in detecting iterative AI processing depth. Your task is to determine whether text has undergone fewer or more iterations of LLM paraphrasing.

TASK CONTEXT: You are analyzing text that has been paraphrased multiple times by AI systems. Earlier iterations retain more original characteristics, while deeper iterations show increasing AI processing artifacts and departure from natural expression.

CLASSIFICATION CRITERIA:
- 1st iteration paraphrase (0): Less deep AI processing - some original patterns remain, moderate AI influence
- 3rd iteration paraphrase (1): Deeper AI processing - heavily processed, multiple layers of AI transformation, more artificial

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify the iterative processing depth as either 1st iteration (0) or 3rd iteration (1).

Text: "The multifaceted paradigmatic framework necessitates the implementation of synergistic methodologies to facilitate optimal outcomes through comprehensive strategic initiatives."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Please analyze this text and classify the iterative processing depth as either 1st iteration (0) or 3rd iteration (1).

Text: "The new software helps companies work more efficiently by automating routine tasks and improving workflow management."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify the iterative processing depth as either 1st iteration (0) or 3rd iteration (1).

Text: "The revolutionary technological advancement facilitates unprecedented optimization of organizational operational parameters through innovative systematic approaches."

Classification:"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Please analyze this text and classify the iterative processing depth as either 1st iteration (0) or 3rd iteration (1).

Text: "{text}"

Classification:"""
        }
    ]
    
    return messages

def create_few_shot_deep_attack_detection_messages(text):
    """Multi-turn format with few-shot examples for Task 5: Original vs Deep Paraphrase Attack Detection"""
    
    messages = [
        {
            "role": "system",
            "content": """You are a cybersecurity expert specializing in detecting sophisticated AI paraphrase attacks. Your task is to distinguish between authentic human-written text and heavily processed AI paraphrases designed to evade detection.

TASK CONTEXT: You are facing the most challenging detection scenario - authentic human original text versus 3rd-iteration LLM paraphrases (the most sophisticated paraphrase attacks). These attacks are designed to fool detection systems.

CLASSIFICATION CRITERIA:
- Human original (0): Authentic human expression, natural imperfections, genuine voice, unprocessed authenticity
- Deep paraphrase attack (1): Heavily processed AI text, multiple transformation layers, sophisticated evasion attempts

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify it as either human original (0) or deep paraphrase attack (1).

Text: "The comprehensive integration of advanced technological paradigms facilitates the optimization of multidimensional operational frameworks through systematic implementation of innovative methodological approaches."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Please analyze this text and classify it as either human original (0) or deep paraphrase attack (1).

Text: "I can't believe it's already Friday! This week flew by so fast, probably because I was actually enjoying my work for once."

Classification:"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Please analyze this text and classify it as either human original (0) or deep paraphrase attack (1).

Text: "The strategic utilization of cutting-edge solutions enables organizations to achieve enhanced performance metrics while addressing complex challenges through innovative implementation strategies."

Classification:"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Please analyze this text and classify it as either human original (0) or deep paraphrase attack (1).

Text: "{text}"

Classification:"""
        }
    ]
    
    return messages

# =============================================================================
# SENTENCE-PAIR PROMPTS WITH FEW-SHOT EXAMPLES
# =============================================================================

def create_few_shot_paraphrase_pair_messages(sentence1, sentence2):
    """Multi-turn format with few-shot examples for Task 1: Paraphrase Source Attribution (Sentence Pair)"""
    
    messages = [
        {
            "role": "system",
            "content": """You are an expert text analyst specializing in comparative paraphrase detection. Your task is to determine which sentence in a pair was paraphrased by a human versus an AI/LLM system.

TASK CONTEXT: You are comparing two paraphrased versions of the same content. One was created by a human, the other by an AI/LLM. Human paraphrases show natural linguistic intuition, while LLM paraphrases exhibit systematic patterns.

COMPARISON CRITERIA:
- Human paraphrase: Natural flow, contextual awareness, human-like word choices, appropriate style
- LLM paraphrase: Systematic rewording, over-precision, unnatural phrasing, AI-like formalization

INSTRUCTIONS: 
1. Analyze both sentences carefully
2. Determine which sentence shows more human-like paraphrasing characteristics
3. Respond with 0 if the FIRST sentence is more human-like, 1 if the SECOND sentence is more human-like

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Compare these two paraphrased sentences and determine which is more human-like.

Sentence 1: "The expeditious mahogany-colored vulpine creature propels itself in a vertical trajectory above the lethargic canine"
Sentence 2: "A quick brown fox jumps over a sleepy dog"

Which sentence is more human-like?"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Compare these two paraphrased sentences and determine which is more human-like.

Sentence 1: "My car broke down again yesterday"
Sentence 2: "The vehicular transportation device experienced a mechanical malfunction during the previous diurnal period"

Which sentence is more human-like?"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Compare these two paraphrased sentences and determine which is more human-like.

Sentence 1: "The comprehensive methodology facilitates optimal outcomes through systematic implementation"
Sentence 2: "This approach helps achieve better results by following a structured process"

Which sentence is more human-like?"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Compare these two paraphrased sentences and determine which is more human-like.

Sentence 1: "{sentence1}"
Sentence 2: "{sentence2}"

Which sentence is more human-like?"""
        }
    ]
    
    return messages

def create_few_shot_authorship_pair_messages(sentence1, sentence2):
    """Multi-turn format with few-shot examples for Task 2: General Text Authorship Detection (Sentence Pair)"""
    
    messages = [
        {
            "role": "system",
            "content": """You are an expert in comparative AI-generated text detection. Your task is to determine which sentence in a pair was originally written by a human versus generated by an AI/LLM system.

TASK CONTEXT: You are comparing original text authorship between two sentences. One is authentic human writing, the other is AI-generated. Human writing shows personal voice and natural expression, while AI writing exhibits training patterns.

COMPARISON CRITERIA:
- Human original: Authentic voice, natural imperfections, personal style, genuine creativity
- LLM generated: Training patterns, generic expressions, artificial smoothness, systematic structure

INSTRUCTIONS:
1. Analyze both sentences for authenticity markers
2. Determine which sentence shows more human authorship characteristics
3. Respond with 0 if the FIRST sentence is more human-authored, 1 if the SECOND sentence is more human-authored

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which is more human-authored.

Sentence 1: "In today's rapidly evolving digital landscape, organizations must leverage cutting-edge technologies to optimize their operational efficiency"
Sentence 2: "Ugh, my laptop crashed right in the middle of my presentation. Murphy's law strikes again!"

Which sentence is more human-authored?"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Compare these two sentences and determine which is more human-authored.

Sentence 1: "I honestly can't decide between pizza or tacos for dinner tonight"
Sentence 2: "The decision-making process regarding culinary preferences presents multiple viable options for consideration"

Which sentence is more human-authored?"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which is more human-authored.

Sentence 1: "The implementation of artificial intelligence solutions presents numerous opportunities for enhancing productivity"
Sentence 2: "AI tools are pretty cool, but sometimes they give weird answers that make no sense"

Which sentence is more human-authored?"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Compare these two sentences and determine which is more human-authored.

Sentence 1: "{sentence1}"
Sentence 2: "{sentence2}"

Which sentence is more human-authored?"""
        }
    ]
    
    return messages

def create_few_shot_laundering_pair_messages(sentence1, sentence2):
    """Multi-turn format with few-shot examples for Task 3: AI Text Laundering Detection (Sentence Pair)"""
    
    messages = [
        {
            "role": "system",
            "content": """You are a specialist in comparative AI text laundering detection. Your task is to determine which sentence in a pair shows deeper AI processing - comparing LLM-paraphrased original content versus LLM-paraphrased generated content.

TASK CONTEXT: You are comparing two types of AI-processed text to identify which has undergone more intensive AI processing (text laundering). One is an LLM paraphrase of human content, the other is an LLM paraphrase of AI content.

COMPARISON CRITERIA:
- LLM paraphrased original: AI processing of human content - retains some authenticity
- LLM paraphrased generated: AI processing of AI content - deeper artificial patterns, more laundering

INSTRUCTIONS:
1. Analyze both sentences for depth of AI processing
2. Determine which sentence shows more intensive AI laundering
3. Respond with 0 if the FIRST sentence shows more AI laundering, 1 if the SECOND sentence shows more AI laundering

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which shows more AI laundering.

Sentence 1: "The comprehensive utilization of innovative methodologies enables organizations to achieve enhanced performance metrics through strategic implementation"
Sentence 2: "My neighbor's dog keeps me awake at night with all that barking"

Which sentence shows more AI laundering?"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user", 
            "content": """Compare these two sentences and determine which shows more AI laundering.

Sentence 1: "The weather has been really unpredictable lately, making it hard to plan outdoor activities"
Sentence 2: "The systematic optimization of operational frameworks facilitates enhanced organizational effectiveness through comprehensive strategic initiatives"

Which sentence shows more AI laundering?"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which shows more AI laundering.

Sentence 1: "The multifaceted paradigmatic approach necessitates the implementation of synergistic solutions to achieve optimal outcomes"
Sentence 2: "This new software helps companies work more efficiently by automating routine tasks"

Which sentence shows more AI laundering?"""
        },
        {
            "role": "assistant", 
            "content": "0"
        },
        {
            "role": "user",
            "content": f"""Compare these two sentences and determine which shows more AI laundering.

Sentence 1: "{sentence1}"
Sentence 2: "{sentence2}"

Which sentence shows more AI laundering?"""
        }
    ]
    
    return messages

def create_few_shot_iterative_pair_messages(sentence1, sentence2):
    """Multi-turn format with few-shot examples for Task 4: Iterative Paraphrase Depth Detection (Sentence Pair)"""
    
    messages = [
        {
            "role": "system",
            "content": """You are an expert in comparative iterative AI processing analysis. Your task is to determine which sentence in a pair has undergone deeper iterative LLM paraphrasing.

TASK CONTEXT: You are comparing sentences that have been paraphrased different numbers of times by AI systems. One has fewer iterations, the other has more iterations. Deeper iterations show increasing AI processing artifacts.

COMPARISON CRITERIA:
- 1st iteration: Less deep processing - some original characteristics remain
- 3rd iteration: Deeper processing - heavily transformed, more artificial patterns

INSTRUCTIONS:
1. Analyze both sentences for depth of iterative processing
2. Determine which sentence shows more iterations of AI paraphrasing
3. Respond with 0 if the FIRST sentence shows deeper processing, 1 if the SECOND sentence shows deeper processing

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which shows deeper iterative processing.

Sentence 1: "The multifaceted paradigmatic framework necessitates the implementation of synergistic methodologies to facilitate optimal outcomes"
Sentence 2: "The new software helps companies work more efficiently by automating routine tasks"

Which sentence shows deeper iterative processing?"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user", 
            "content": """Compare these two sentences and determine which shows deeper iterative processing.

Sentence 1: "This approach helps achieve better results by following a structured process"
Sentence 2: "The revolutionary technological advancement facilitates unprecedented optimization of organizational operational parameters through innovative systematic approaches"

Which sentence shows deeper iterative processing?"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which shows deeper iterative processing.

Sentence 1: "The comprehensive integration of advanced solutions enables enhanced performance through strategic implementation"
Sentence 2: "Companies can improve their operations by using better technology and planning"

Which sentence shows deeper iterative processing?"""
        },
        {
            "role": "assistant", 
            "content": "0"
        },
        {
            "role": "user",
            "content": f"""Compare these two sentences and determine which shows deeper iterative processing.

Sentence 1: "{sentence1}"
Sentence 2: "{sentence2}"

Which sentence shows deeper iterative processing?"""
        }
    ]
    
    return messages

def create_few_shot_deep_attack_pair_messages(sentence1, sentence2):
    """Multi-turn format with few-shot examples for Task 5: Original vs Deep Paraphrase Attack Detection (Sentence Pair)"""
    
    messages = [
        {
            "role": "system",
            "content": """You are a cybersecurity expert specializing in comparative detection of sophisticated AI paraphrase attacks. Your task is to distinguish between authentic human-written text and heavily processed AI paraphrases in direct comparison.

TASK CONTEXT: You are facing the ultimate detection challenge - comparing authentic human original text against 3rd-iteration LLM paraphrases (sophisticated evasion attacks) to identify which is the authentic human text.

COMPARISON CRITERIA:
- Human original: Authentic expression, natural imperfections, genuine voice, unprocessed
- Deep paraphrase attack: Heavily processed, multiple AI transformations, sophisticated evasion

INSTRUCTIONS:
1. Analyze both sentences for authenticity versus AI processing
2. Determine which sentence is the authentic human original
3. Respond with 0 if the FIRST sentence is more human-original, 1 if the SECOND sentence is more human-original

IMPORTANT: You must respond with ONLY the number 0 or 1. No explanation or additional text is allowed."""
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which is the authentic human original.

Sentence 1: "The comprehensive integration of advanced technological paradigms facilitates the optimization of multidimensional operational frameworks"
Sentence 2: "I can't believe it's already Friday! This week flew by so fast"

Which sentence is the authentic human original?"""
        },
        {
            "role": "assistant",
            "content": "1"
        },
        {
            "role": "user", 
            "content": """Compare these two sentences and determine which is the authentic human original.

Sentence 1: "My coffee maker broke again this morning, third time this month!"
Sentence 2: "The strategic utilization of cutting-edge solutions enables organizations to achieve enhanced performance metrics through innovative implementation"

Which sentence is the authentic human original?"""
        },
        {
            "role": "assistant",
            "content": "0"
        },
        {
            "role": "user",
            "content": """Compare these two sentences and determine which is the authentic human original.

Sentence 1: "The systematic implementation of advanced methodologies facilitates optimal organizational outcomes through comprehensive strategic initiatives"
Sentence 2: "Honestly, I have no idea what I'm doing half the time, but somehow it works out"

Which sentence is the authentic human original?"""
        },
        {
            "role": "assistant", 
            "content": "1"
        },
        {
            "role": "user",
            "content": f"""Compare these two sentences and determine which is the authentic human original.

Sentence 1: "{sentence1}"
Sentence 2: "{sentence2}"

Which sentence is the authentic human original?"""
        }
    ]
    
    return messages

# =============================================================================
# BATCH PROMPTING WITH FEW-SHOT EXAMPLES
# =============================================================================

def create_batch_single_sentence_messages(task_num, batch_data):
    """Create batch messages for single-sentence tasks with few-shot examples"""
    
    # Task-specific system messages and examples
    task_configs = {
        "task1": {
            "system": """You are an expert text analyst specializing in paraphrase detection. Your task is to determine whether paraphrased sentences were created by humans or AI/LLM systems.

CLASSIFICATION CRITERIA:
- Human paraphrase (0): Natural flow, contextual understanding, human-like word choices
- LLM paraphrase (1): Systematic rewording patterns, over-precision, unnatural phrasing

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each text, separated by commas. No explanations allowed.""",
            "examples": [
                ("The expeditious mahogany-colored vulpine creature propels itself in a vertical trajectory above the lethargic canine", "1"),
                ("A quick brown fox jumps over a sleepy dog", "0"),
                ("The research methodology employed demonstrates a comprehensive approach to data analysis", "1")
            ]
        },
        "task2": {
            "system": """You are an expert in AI-generated text detection. Your task is to determine whether sentences were originally written by humans or generated by AI/LLM systems.

CLASSIFICATION CRITERIA:
- Human original (0): Authentic voice, natural imperfections, personal style, genuine creativity
- LLM generated (1): Training data patterns, generic expressions, artificial smoothness

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each text, separated by commas. No explanations allowed.""",
            "examples": [
                ("In today's rapidly evolving digital landscape, organizations must leverage cutting-edge technologies", "1"),
                ("Ugh, my coffee maker broke again this morning. Third time this month!", "0"),
                ("The implementation of artificial intelligence solutions presents numerous opportunities", "1")
            ]
        },
        "task3": {
            "system": """You are a specialist in detecting AI text laundering techniques. Your task is to determine the level of AI processing in text.

CLASSIFICATION CRITERIA:
- LLM paraphrased original (0): AI paraphrase of human content - retains some authenticity
- LLM paraphrased generated (1): AI paraphrase of AI content - multiple layers of processing

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each text, separated by commas. No explanations allowed.""",
            "examples": [
                ("The systematic implementation of advanced technological solutions facilitates optimization", "1"),
                ("My neighbor's dog keeps barking at night, making it difficult to sleep", "0"),
                ("The comprehensive utilization of innovative methodologies enables enhanced performance", "1")
            ]
        },
        "task4": {
            "system": """You are an expert in detecting iterative AI processing depth. Your task is to determine processing depth levels.

CLASSIFICATION CRITERIA:
- 1st iteration paraphrase (0): Less deep processing - some original patterns remain
- 3rd iteration paraphrase (1): Deeper processing - heavily transformed, more artificial

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each text, separated by commas. No explanations allowed.""",
            "examples": [
                ("The multifaceted paradigmatic framework necessitates synergistic methodologies", "1"),
                ("The new software helps companies work more efficiently", "0"),
                ("The revolutionary technological advancement facilitates unprecedented optimization", "1")
            ]
        },
        "task5": {
            "system": """You are a cybersecurity expert detecting sophisticated AI paraphrase attacks. Your task is to distinguish authentic human text from deep AI attacks.

CLASSIFICATION CRITERIA:
- Human original (0): Authentic expression, natural imperfections, genuine voice
- Deep paraphrase attack (1): Heavily processed AI text, multiple transformation layers

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each text, separated by commas. No explanations allowed.""",
            "examples": [
                ("The comprehensive integration of advanced technological paradigms facilitates optimization", "1"),
                ("I can't believe it's already Friday! This week flew by so fast", "0"),
                ("The strategic utilization of cutting-edge solutions enables enhanced performance", "1")
            ]
        }
    }
    
    config = task_configs.get(task_num, task_configs["task1"])
    
    messages = [
        {
            "role": "system",
            "content": config["system"]
        }
    ]
    
    # Add few-shot examples
    for example_text, example_label in config["examples"]:
        messages.extend([
            {
                "role": "user",
                "content": f"Text: \"{example_text}\"\n\nClassification:"
            },
            {
                "role": "assistant",
                "content": example_label
            }
        ])
    
    # Add batch texts
    batch_texts = []
    for i, item in enumerate(batch_data):
        text = item.get('text', item.get('sentence', ''))
        batch_texts.append(f"Text {i+1}: \"{text}\"")
    
    batch_content = "\n".join(batch_texts) + "\n\nClassifications (comma-separated):"
    
    messages.append({
        "role": "user",
        "content": batch_content
    })
    
    return messages

def create_batch_sentence_pair_messages(task_num, batch_data):
    """Create batch messages for sentence-pair tasks with few-shot examples"""
    
    # Task-specific system messages and examples
    task_configs = {
        "task1": {
            "system": """You are an expert text analyst specializing in comparative paraphrase detection. Your task is to determine which sentence in each pair was paraphrased by a human versus an AI/LLM system.

COMPARISON CRITERIA:
- Human paraphrase: Natural flow, contextual awareness, human-like word choices
- LLM paraphrase: Systematic rewording, over-precision, unnatural phrasing

INSTRUCTIONS: Respond with 0 if the FIRST sentence is more human-like, 1 if the SECOND sentence is more human-like.

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each pair, separated by commas. No explanations allowed.""",
            "examples": [
                (("The expeditious mahogany-colored vulpine creature propels itself", "A quick brown fox jumps over a sleepy dog"), "1"),
                (("My car broke down again yesterday", "The vehicular transportation device experienced mechanical malfunction"), "0"),
                (("The comprehensive methodology facilitates optimal outcomes", "This approach helps achieve better results"), "1")
            ]
        },
        "task2": {
            "system": """You are an expert in comparative AI-generated text detection. Your task is to determine which sentence in each pair was originally written by a human versus generated by an AI/LLM system.

COMPARISON CRITERIA:
- Human original: Authentic voice, natural imperfections, personal style
- LLM generated: Training patterns, generic expressions, artificial smoothness

INSTRUCTIONS: Respond with 0 if the FIRST sentence is more human-authored, 1 if the SECOND sentence is more human-authored.

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each pair, separated by commas. No explanations allowed.""",
            "examples": [
                (("In today's rapidly evolving digital landscape, organizations must leverage", "Ugh, my laptop crashed right in the middle of my presentation"), "1"),
                (("I honestly can't decide between pizza or tacos for dinner", "The decision-making process regarding culinary preferences presents options"), "0"),
                (("The implementation of artificial intelligence solutions presents opportunities", "AI tools are pretty cool, but sometimes they give weird answers"), "1")
            ]
        },
        "task3": {
            "system": """You are a specialist in comparative AI text laundering detection. Your task is to determine which sentence shows deeper AI processing.

COMPARISON CRITERIA:
- LLM paraphrased original: AI processing of human content - retains some authenticity
- LLM paraphrased generated: AI processing of AI content - deeper artificial patterns

INSTRUCTIONS: Respond with 0 if the FIRST sentence shows more AI laundering, 1 if the SECOND sentence shows more AI laundering.

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each pair, separated by commas. No explanations allowed.""",
            "examples": [
                (("The comprehensive utilization of innovative methodologies enables enhanced performance", "My neighbor's dog keeps me awake at night"), "0"),
                (("The weather has been really unpredictable lately", "The systematic optimization of operational frameworks facilitates effectiveness"), "1"),
                (("The multifaceted paradigmatic approach necessitates synergistic solutions", "This new software helps companies work more efficiently"), "0")
            ]
        },
        "task4": {
            "system": """You are an expert in comparative iterative AI processing analysis. Your task is to determine which sentence has undergone deeper iterative LLM paraphrasing.

COMPARISON CRITERIA:
- 1st iteration: Less deep processing - some original characteristics remain
- 3rd iteration: Deeper processing - heavily transformed, more artificial patterns

INSTRUCTIONS: Respond with 0 if the FIRST sentence shows deeper processing, 1 if the SECOND sentence shows deeper processing.

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each pair, separated by commas. No explanations allowed.""",
            "examples": [
                (("The multifaceted paradigmatic framework necessitates synergistic methodologies", "The new software helps companies work more efficiently"), "0"),
                (("This approach helps achieve better results", "The revolutionary technological advancement facilitates unprecedented optimization"), "1"),
                (("The comprehensive integration of advanced solutions enables performance", "Companies can improve operations by using better technology"), "0")
            ]
        },
        "task5": {
            "system": """You are a cybersecurity expert specializing in comparative detection of sophisticated AI paraphrase attacks. Your task is to identify authentic human text versus deep AI attacks.

COMPARISON CRITERIA:
- Human original: Authentic expression, natural imperfections, genuine voice
- Deep paraphrase attack: Heavily processed, multiple AI transformations

INSTRUCTIONS: Respond with 0 if the FIRST sentence is more human-original, 1 if the SECOND sentence is more human-original.

IMPORTANT: You must respond with ONLY the numbers 0 or 1 for each pair, separated by commas. No explanations allowed.""",
            "examples": [
                (("The comprehensive integration of advanced technological paradigms", "I can't believe it's already Friday! This week flew by"), "1"),
                (("My coffee maker broke again this morning, third time this month!", "The strategic utilization of cutting-edge solutions enables performance"), "0"),
                (("The systematic implementation of advanced methodologies facilitates outcomes", "Honestly, I have no idea what I'm doing half the time"), "1")
            ]
        }
    }
    
    config = task_configs.get(task_num, task_configs["task1"])
    
    messages = [
        {
            "role": "system",
            "content": config["system"]
        }
    ]
    
    # Add few-shot examples
    for (sent1, sent2), example_label in config["examples"]:
        messages.extend([
            {
                "role": "user",
                "content": f"Sentence 1: \"{sent1}\"\nSentence 2: \"{sent2}\"\n\nWhich sentence fits the criteria better?"
            },
            {
                "role": "assistant",
                "content": example_label
            }
        ])
    
    # Add batch pairs
    batch_pairs = []
    for i, item in enumerate(batch_data):
        sentence_pair = item.get('sentence_pair', [])
        if len(sentence_pair) >= 2:
            sentence1, sentence2 = sentence_pair[0], sentence_pair[1]
            batch_pairs.append(f"Pair {i+1}:\n  Sentence 1: \"{sentence1}\"\n  Sentence 2: \"{sentence2}\"")
    
    batch_content = "\n\n".join(batch_pairs) + "\n\nClassifications (comma-separated):"
    
    messages.append({
        "role": "user",
        "content": batch_content
    })
    
    return messages

# =============================================================================
# PROMPT SELECTOR FUNCTIONS
# =============================================================================

def get_single_sentence_messages(task_num, text):
    """Get appropriate single-sentence messages based on task number"""
    message_functions = {
        "task1": create_few_shot_paraphrase_detection_messages,
        "task2": create_few_shot_authorship_detection_messages,
        "task3": create_few_shot_laundering_detection_messages,
        "task4": create_few_shot_iterative_depth_detection_messages,
        "task5": create_few_shot_deep_attack_detection_messages
    }
    
    func = message_functions.get(task_num, create_few_shot_paraphrase_detection_messages)
    return func(text)

def get_sentence_pair_messages(task_num, sentence1, sentence2):
    """Get appropriate sentence-pair messages based on task number"""
    message_functions = {
        "task1": create_few_shot_paraphrase_pair_messages,
        "task2": create_few_shot_authorship_pair_messages,
        "task3": create_few_shot_laundering_pair_messages,
        "task4": create_few_shot_iterative_pair_messages,
        "task5": create_few_shot_deep_attack_pair_messages
    }
    
    func = message_functions.get(task_num, create_few_shot_paraphrase_pair_messages)
    return func(sentence1, sentence2)

def get_batch_messages(task_num, task_type, batch_data):
    """Get appropriate batch messages based on task number and type"""
    if task_type == "sentence_pair":
        return create_batch_sentence_pair_messages(task_num, batch_data)
    else:
        return create_batch_single_sentence_messages(task_num, batch_data)
